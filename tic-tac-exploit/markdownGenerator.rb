
class MarkdownGenerator
    IMAGE_BASE_URL = 'https://raw.githubusercontent.com/Summeli/Summeli/master/img'
    ISSUE_BASE_URL = 'https://github.com/Summeli/Summeli/issues/new'
    ISSUE_BODY = 'body=Just+push+%27Submit+new+issue%27+without+editing+the+title.+The+README+will+be+updated+after+approximately+30+seconds.'

    EMPTY = "#{IMAGE_BASE_URL}/empty.png"
    O = "#{IMAGE_BASE_URL}/o.png"
    X = "#{IMAGE_BASE_URL}/x.png"
    RESET_URL = "#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0&#{ISSUE_BODY}"

    def initialize
    end

    def renderReadme(game_state:, githubuser: 'keijo', winner: false )
        markdown = getHead

        markdown.concat <<~HTML
        Last game was played by: <a href=https://github.com/#{githubuser}>@#{githubuser}</a>
        <br/>
        <table>
        <tr>
        HTML
        
        #first row
        markdown.concat << renderEndGameCell(cell: game_state[0])
        markdown.concat << renderEndGameCell(cell: game_state[1])
        markdown.concat << renderEndGameCell(cell: game_state[2])
        markdown.concat << "</tr> <tr>"
        #second row
        markdown.concat << renderEndGameCell(cell: game_state[3])
        markdown.concat << renderEndGameCell(cell: game_state[4])
        markdown.concat << renderEndGameCell(cell: game_state[5])
        markdown.concat << "</tr> <tr>"
        #third row
        markdown.concat << renderEndGameCell(cell: game_state[6])
        markdown.concat << renderEndGameCell(cell: game_state[7])
        markdown.concat << renderEndGameCell(cell: game_state[8])
        markdown.concat << "</tr></table>"
        return markdown;
    end

    def renderReset(githubuser:)
        markdown = getHead
        markdown.concat <<~HTML
        Reset was requested by: <a href=https://github.com/#{githubuser}>@#{githubuser}</a>
        <table>
          <tr>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A1%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C1%7C0%7C0%7C0%7C0%7C0%7C0%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C1%7C0%7C0%7C0%7C0%7C0%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
           </tr> 
           <tr>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C0%7C1%7C0%7C0%7C0%7C0%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C0%7C0%7C1%7C0%7C0%7C0%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C0%7C0%7C0%7C1%7C0%7C0%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
          </tr>
          <tr>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C0%7C0%7C0%7C0%7C1%7C0%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C0%7C0%7C0%7C0%7C0%7C1%7C0&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
            <td> <a href="#{ISSUE_BASE_URL}?title=ttestate%3A0%7C0%7C0%7C0%7C0%7C0%7C0%7C0%7C1&#{ISSUE_BODY}"><img src=#{EMPTY}></a></td>
          </tr>
        </table>
        HTML
        return markdown
    end

  private

    def getHead
      mk = <<~HTML
      ### Hi there ðŸ‘‹

      - ðŸ‘¯ I'm CTO and Co-Founder of [Cloudamite](https://cloudamite.com) 
      - ðŸ¤” I'm intersted in : Emulators
      - ðŸŒ± Iâ€™m currently learning 3d-modeling and design.
      - ðŸ’¬ Ask me about: Cloud 
      - âš¡ Fun fact: I'm an active climber and snowboarder. Follow my adventures in [Youtube](https://www.youtube.com/channel/UCH2A1M35TShE6JRTzvTPMWA) and [Instagram](https://www.instagram.com/antti.pohjola)
      - ðŸ“« How to reach me:
          **[E-Mail](mailto:summeli@summeli.com), [LinkedIn](https://www.linkedin.com/in/antti-pohjola), [Youtube](https://www.youtube.com/channel/UCH2A1M35TShE6JRTzvTPMWA), [Instagram](https://instagram.com/antti.pohjola)**

      ### I Challenge you for a friendly game of Tic-Tac-Exploit  <br>
      <br/>
      Do you have what it takes to hack me? Click somewhere in the game area to find out! <br/><br/>
      HTML
      return mk
    end

    def renderEndGameCell(cell:)
      if(cell == '0')
        return "<td><a href=#{RESET_URL}><img src=#{X}></a>"
      else
        return "<td><a href=#{RESET_URL}><img src=#{O}></a>"
      end
    end

end
